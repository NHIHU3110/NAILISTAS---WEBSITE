const openBtn = document.getElementById("openContact");
const closeBtn = document.getElementById("closePopup");
const popup = document.getElementById("contactPopup");
const overlay = document.getElementById("overlay");

// M·ªü / ƒë√≥ng popup
openBtn.addEventListener("click", () => {
  popup.classList.add("show");
  overlay.classList.add("show");
});

closeBtn.addEventListener("click", () => {
  popup.classList.remove("show");
  overlay.classList.remove("show");
});

overlay.addEventListener("click", () => {
  popup.classList.remove("show");
  overlay.classList.remove("show");
});

// Hi·ªáu ·ª©ng load trang khi m·ªõi v√†o
window.addEventListener('load', () => {
  document.body.classList.add('fade-in');
});

// ‚ú® √Åp d·ª•ng hi·ªáu ·ª©ng overlay cho T·∫§T C·∫¢ c√°c th·∫ª <a> ‚ú®
document.querySelectorAll('a[href]').forEach(link => {
  link.addEventListener('click', function(e) {
    const targetUrl = this.getAttribute('href');
    // B·ªè qua n·∫øu l√† li√™n k·∫øt # ho·∫∑c tel/mailto
    if (!targetUrl || targetUrl.startsWith('#') || targetUrl.startsWith('mailto:') || targetUrl.startsWith('tel:')) return;

    e.preventDefault();
    const overlay = document.getElementById('transition-overlay');
    overlay.style.display = 'flex';
    overlay.style.opacity = '1';
    setTimeout(() => {
      window.location.href = targetUrl;
    }, 800);
  });
});

// Hi·ªáu ·ª©ng khi reload / quay l·∫°i trang
window.addEventListener('pageshow', () => {
  const overlay = document.getElementById('transition-overlay');
  overlay.style.display = 'flex';
  overlay.style.opacity = '1';
  setTimeout(() => {
    overlay.style.opacity = '0';
    setTimeout(() => {
      overlay.style.display = 'none';
      overlay.style.opacity = '1';
    }, 800);
  }, 400);
});

// Chuy·ªÉn trang v·ªÅ home
function goHome() {
  const overlay = document.getElementById('transition-overlay');
  overlay.style.display = 'flex';
  overlay.style.opacity = '1';
  setTimeout(() => {
    window.location.href = "../Homepage/ck.html";
  }, 800);
}

// üíå Popup c·∫£m ∆°n khi g·ª≠i form
const form = document.querySelector("#contactPopup form");
const thankPopup = document.getElementById("thankPopup");

// Ki·ªÉm tra n·∫øu form t·ªìn t·∫°i
if (form) {
  form.addEventListener("submit", (e) => {
    e.preventDefault(); // NgƒÉn reload trang

    // ·∫®n form li√™n h·ªá
    popup.classList.remove("show");
    overlay.classList.remove("show");

    // Reset (xo√° to√†n b·ªô n·ªôi dung nh·∫≠p)
    form.reset();

    // Hi·ªán popup c·∫£m ∆°n
    thankPopup.classList.add("show");

    // T·ª± ƒë·ªông ·∫©n sau 2s
    setTimeout(() => {
      thankPopup.classList.remove("show");
    }, 2000);
  });
}
