<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nailistas ‚Ä¢ Admin Dashboard</title>
  <link rel="icon" href="../images/nail logo-01.png" type="image/png">
  <link rel="stylesheet" href="admin.css" />
  <style>
    

  </style>
</head>
<body>
    <!-- Overlay x√°c nh·∫≠n ƒëƒÉng xu·∫•t -->
  <div id="logoutConfirm" class="overlay">
    <div class="confirm-box">
      <h3>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒëƒÉng xu·∫•t kh√¥ng?</h3>
      <div class="confirm-buttons">
        <button class="btn yes" onclick="confirmLogout()">ƒêƒÉng xu·∫•t</button>
        <button class="btn no" onclick="closeLogout()">H·ªßy</button>
      </div>
    </div>
  </div>

  <!-- ASIDE -->
  <aside>
    <div class="brand" style="margin:4px 4px 16px">
      <div class="brand-badge"><span>N</span></div>
      <div>
        <div style="font-size:14px">Nailistas</div>
        <div style="font-size:11px;color:var(--tx-muted)">Nail studio ‚Ä¢ Admin</div>
      </div>
    </div>
    <div class="nav-section">
      <h4>ƒêi·ªÅu h∆∞·ªõng</h4>
      <nav class="nav">
        <a href="#dashboard" onclick="showSection('dashboard')" class="active"><span class="dot"></span>Dashboard</a>
        <a href="#appointments" onclick="showSection('appointments')"><span class="dot"></span>L·ªãch h·∫πn</a>
        <a href="#customers" onclick="showSection('customers')"><span class="dot"></span>Kh√°ch h√†ng</a>
        <a href="#services" onclick="showSection('services')"><span class="dot"></span>D·ªãch v·ª•</a>
        <a href="#staff" onclick="showSection('staff')"><span class="dot"></span>Nh√¢n s·ª±</a>
        <a href="#inventory" onclick="showSection('inventory')"><span class="dot"></span>V·∫≠t t∆∞</a>
        <a href="#promos" onclick="showSection('promos')"><span class="dot"></span>Khuy·∫øn m√£i</a>
        <a href="#reports" onclick="showSection('reports')"><span class="dot"></span>B√°o c√°o</a>
        <a href="#settings" onclick="showSection('settings')"><span class="dot"></span>C√†i ƒë·∫∑t</a>
      </nav>
    </div>

    <div style="margin-top:18px" class="infobox">
      <h3>TIPS</h3>
      <p>Nh·∫•n <b>"Th√™m l·ªãch h·∫πn"</b> ƒë·ªÉ t·∫°o nhanh. D·ªØ li·ªáu l∆∞u t·∫°m trong tr√¨nh duy·ªát.</p>
    </div>
  </aside>

  <!-- HEADER -->
  <header>
    <div class="brand">
      <div class="brand-badge"><span>üíÖ</span></div>
      <div>Dashboard</div>
    </div>
    <div class="header-actions">
      <div class="search"><input id="globalSearch" placeholder="T√¨m nhanh (KH, d·ªãch v·ª•, m√£)..."/></div>
      <div class="user-chip">
        <span>Admin</span>
        <button class="btn logout" onclick="logout()">ƒêƒÉng xu·∫•t</button>
      </div>      
    </div>
  </header>

  <!-- MAIN -->
  <main>
    <!-- DASHBOARD -->
    <section id="dashboard" class="view grid" style="gap:20px">
      <div class="grid kpis">
        <div class="card kpi">
          <div>
            <div class="label">L·ªãch h·∫πn h√¥m nay</div>
            <div class="value" id="kpiBookings">0</div>
          </div>
          <div class="pill"><span class="dot"></span><span class="trend up" id="kpiBookingsTrend">+0%</span></div>
        </div>
        <div class="card kpi">
          <div>
            <div class="label">Doanh thu d·ª± ki·∫øn</div>
            <div class="value" id="kpiRevenue">0‚Ç´</div>
          </div>
          <div class="pill"><span class="dot"></span><span class="trend up" id="kpiRevenueTrend">+0%</span></div>
        </div>
        <div class="card kpi">
          <div>
            <div class="label">T·ªâ l·ªá l·∫•p ƒë·∫ßy</div>
            <div class="value" id="kpiUtil">0%</div>
          </div>
          <div class="pill"><span class="dot"></span><span class="trend up">H√¥m nay</span></div>
        </div>
        <div class="card kpi">
          <div>
            <div class="label">Kh√°ch m·ªõi</div>
            <div class="value" id="kpiNew">0</div>
          </div>
          <div class="pill"><span class="dot"></span><span class="trend up">7 ng√†y</span></div>
        </div>
      </div>

      <div class="card">
        <div class="toolbar" style="justify-content:space-between">
          <div style="font-weight:700">L·ªãch h·∫πn s·∫Øp t·ªõi</div>
          <div>
            <button class="btn primary" onclick="openModal('createAppt')">Th√™m l·ªãch h·∫πn</button>
            <button class="btn" onclick="exportCSV()">Xu·∫•t CSV</button>
          </div>
        </div>
        <div style="margin-top:10px; overflow:auto">
          <table>
            <thead>
              <tr>
                <th>M√£</th>
                <th>Kh√°ch h√†ng</th>
                <th>D·ªãch v·ª•</th>
                <th>K·ªπ thu·∫≠t vi√™n</th>
                <th>Th·ªùi gian</th>
                <th>Gi√°</th>
                <th>Tr·∫°ng th√°i</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="apptBody"></tbody>
          </table>
        </div>
      </div>

      <div class="grid" style="grid-template-columns:2fr 1fr; gap:16px">
        <div class="card">
          <div class="toolbar" style="justify-content:space-between">
            <div style="font-weight:700">Kh√°ch h√†ng</div>
            <button class="btn" onclick="openModal('createCustomer')">Th√™m kh√°ch</button>
          </div>
          <div style="margin-top:10px; overflow:auto">
            <table>
              <thead>
                <tr>
                  <th>T√™n</th>
                  <th>ƒêi·ªán tho·∫°i</th>
                  <th>L∆∞·ª£t ƒë·∫øn</th>
                  <th>Ghi ch√∫</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="custBody"></tbody>
            </table>
          </div>
        </div>
        <div class="card">
          <div class="toolbar" style="justify-content:space-between">
            <div style="font-weight:700">Top d·ªãch v·ª•</div>
            <button class="btn ghost" onclick="seedServices()">Seed m·∫´u</button>
          </div>
          <div id="servicesList" style="display:grid; gap:8px; margin-top:8px"></div>
        </div>
      </div>

      <footer>
        <h3>Nailistas ‚Ä¢ Admin</h3>
        <div>¬© 2025 ‚Äî Thi·∫øt k·∫ø theo palette b·∫°n cung c·∫•p. Giao di·ªán responsive, d·ªØ li·ªáu l∆∞u LocalStorage (demo).</div>
      </footer>
    </section>

    <!-- APPOINTMENTS -->
    <section id="appointments" class="view" hidden>
      <div class="card toolbar" style="justify-content:space-between">
        <h3 style="margin:0">Qu·∫£n l√Ω l·ªãch h·∫πn</h3>
        <div>
          <button class="btn" onclick="filterAppt('all')">T·∫•t c·∫£</button>
          <button class="btn" onclick="filterAppt('booked')">ƒê√£ ƒë·∫∑t</button>
          <button class="btn" onclick="filterAppt('done')">Ho√†n t·∫•t</button>
          <button class="btn" onclick="filterAppt('cancel')">Hu·ª∑</button>
          <button class="btn primary" onclick="openModal('createAppt')">+ L·ªãch h·∫πn</button>
        </div>
      </div>
      <div class="card" style="margin-top:12px">
        <table>
          <thead>
            <tr>
              <th>M√£</th><th>Kh√°ch h√†ng</th><th>D·ªãch v·ª•</th><th>KTV</th><th>Th·ªùi gian</th><th>Gi√°</th><th>Tr·∫°ng th√°i</th><th></th>
            </tr>
          </thead>
          <tbody id="apptBody2"></tbody>
        </table>
      </div>
    </section>

    <!-- CUSTOMERS -->
    <section id="customers" class="view" hidden>
      <div class="card toolbar" style="justify-content:space-between">
        <h3 style="margin:0">Kh√°ch h√†ng</h3>
        <div>
          <button class="btn primary" onclick="openModal('createCustomer')">+ Kh√°ch</button>
        </div>
      </div>
      <div class="card" style="margin-top:12px">
        <table>
          <thead><tr><th>T√™n</th><th>ƒêi·ªán tho·∫°i</th><th>L∆∞·ª£t ƒë·∫øn</th><th>Ghi ch√∫</th><th></th></tr></thead>
          <tbody id="custBody2"></tbody>
        </table>
      </div>
    </section>

    <!-- SERVICES -->
    <section id="services" class="view" hidden>
      <div class="card toolbar" style="justify-content:space-between">
        <h3 style="margin:0">D·ªãch v·ª•</h3>
        <div>
          <button class="btn" onclick="seedServices()">Seed m·∫´u</button>
          <button class="btn primary" onclick="addServicePrompt()">+ D·ªãch v·ª•</button>
        </div>
      </div>
      <div class="card" style="margin-top:12px">
        <table>
          <thead><tr><th>M√£</th><th>T√™n d·ªãch v·ª•</th><th>Gi√°</th><th></th></tr></thead>
          <tbody id="svcBody"></tbody>
        </table>
      </div>
    </section>

    <!-- STAFF -->
    <section id="staff" class="view" hidden>
      <div class="card toolbar" style="justify-content:space-between">
        <h3 style="margin:0">Nh√¢n s·ª±</h3>
        <div>
          <button class="btn primary" onclick="addStaffPrompt()">+ Nh√¢n s·ª±</button>
        </div>
      </div>
      <div class="card" style="margin-top:12px">
        <table>
          <thead><tr><th>T√™n</th><th>Vai tr√≤</th><th>S·ªë ƒëi·ªán tho·∫°i</th><th>Ghi ch√∫</th></tr></thead>
          <tbody id="staffBody"></tbody>
        </table>
      </div>
    </section>

    <!-- INVENTORY -->
    <section id="inventory" class="view" hidden>
      <div class="card toolbar" style="justify-content:space-between">
        <h3 style="margin:0">V·∫≠t t∆∞</h3>
        <div>
          <button class="btn primary" onclick="addItemPrompt()">+ M·∫∑t h√†ng</button>
        </div>
      </div>
      <div class="card" style="margin-top:12px">
        <table>
          <thead><tr><th>M√£</th><th>T√™n</th><th>T·ªìn</th><th>ƒêVT</th><th>Gi√° nh·∫≠p</th></tr></thead>
          <tbody id="invBody"></tbody>
        </table>
      </div>
    </section>

    <!-- PROMOS -->
    <section id="promos" class="view" hidden>
      <div class="card toolbar" style="justify-content:space-between">
        <h3 style="margin:0">Khuy·∫øn m√£i</h3>
        <div>
          <button class="btn primary" onclick="addPromoPrompt()">+ CTKM</button>
        </div>
      </div>
      <div class="card" style="margin-top:12px">
        <table>
          <thead><tr><th>M√£</th><th>T√™n CT</th><th>Hi·ªáu l·ª±c</th><th>Gi·∫£m</th><th>Tr·∫°ng th√°i</th></tr></thead>
        <tbody id="promoBody"></tbody>
        </table>
      </div>
    </section>

    <!-- REPORTS -->
    <section id="reports" class="view" hidden>
      <div class="card toolbar" style="justify-content:space-between">
        <h3 style="margin:0">B√°o c√°o</h3>
        <div>
          <button class="btn" onclick="reportToday()">H√¥m nay</button>
          <button class="btn" onclick="reportMonth()">Th√°ng n√†y</button>
        </div>
      </div>
      <div class="grid" style="grid-template-columns:1fr 1fr; margin-top:12px">
        <div class="card">
          <h4>Doanh thu (t·ªïng)</h4>
          <div id="reportRevenue">0‚Ç´</div>
        </div>
        <div class="card">
          <h4>S·ªë l·ªãch h·∫πn</h4>
          <div id="reportCount">0</div>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="settings" class="view" hidden>
      <div class="card">
        <h3>C√†i ƒë·∫∑t</h3>
        <div class="form" style="max-width:520px">
          <label>T√™n salon<input id="set_name" value="Nailistas"/></label>
          <label>ƒêi·ªán tho·∫°i<input id="set_phone" value="0900 000 000"/></label>
          <label>ƒê·ªãa ch·ªâ<input id="set_addr" value="669 ƒê·ªó M∆∞·ªùi, Linh Xu√¢n, Th·ªß ƒê·ª©c, TP.HCM"/></label>
          <div>
            <button class="btn primary" onclick="saveSettings()">L∆∞u</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- MODALS -->
  <div class="modal" id="createAppt">
    <div class="sheet">
      <div style="display:flex; justify-content:space-between; align-items:center">
        <h3>T·∫°o l·ªãch h·∫πn</h3>
        <button class="btn" onclick="closeModal('createAppt')">ƒê√≥ng</button>
      </div>
      <div class="form">
        <label>Kh√°ch h√†ng<input id="f_name" placeholder="VD: Tr√∫c Mai"/></label>
        <label>ƒêi·ªán tho·∫°i<input id="f_phone" placeholder="09x..."/></label>
        <label>D·ªãch v·ª•<select id="f_service"></select></label>
        <label>K·ªπ thu·∫≠t vi√™n<input id="f_staff" placeholder="VD: Linh"/></label>
        <label>Th·ªùi gian<input id="f_time" type="datetime-local"/></label>
        <label>Gi√° (‚Ç´)<input id="f_price" type="number" min="0" step="10000"/></label>
        <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:6px">
          <button class="btn" onclick="closeModal('createAppt')">Hu·ª∑</button>
          <button class="btn primary" onclick="saveAppt()">L∆∞u</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="createCustomer">
    <div class="sheet">
      <div style="display:flex; justify-content:space-between; align-items:center">
        <h3>Th√™m kh√°ch h√†ng</h3>
        <button class="btn" onclick="closeModal('createCustomer')">ƒê√≥ng</button>
      </div>
      <div class="form">
        <label>T√™n<input id="c_name"/></label>
        <label>ƒêi·ªán tho·∫°i<input id="c_phone"/></label>
        <label>Ghi ch√∫<textarea id="c_note" rows="3"></textarea></label>
        <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:6px">
          <button class="btn" onclick="closeModal('createCustomer')">Hu·ª∑</button>
          <button class="btn primary" onclick="saveCustomer()">L∆∞u</button>
        </div>
      </div>
    </div>
  </div>
<script src="../Login/auth.js"></script>
<script src="admin.js"></script>
</body>
</html>
